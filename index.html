<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sistem√°tica Comercial ¬∑ MVP</title>
  <link rel="stylesheet" href="styles.css"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <header>
    <h1>Sistem√°tica Comercial</h1>
    <div class="userbar">
      <input type="email" id="email" placeholder="tu@email.com">
      <select id="role"></select>
      <button id="btnSaveProfile">Guardar</button>
    </div>
  </header>

  <div class="layout">
    <!-- ===== Sidebar ===== -->
    <nav class="tabs vertical">
      <button data-tab="intro" class="active">Introducci√≥n</button>
      <button data-tab="agenda">Agenda</button>
      <button data-tab="macro">Ciclo Comercial</button>
      <button data-tab="toolkit">Toolkit</button>
      <button data-tab="observaciones">Observaciones</button>
      <button data-tab="history">Historial</button>
    </nav>

    <!-- ===== Contenido ===== -->
    <main>
      <!-- INTRO -->
      <section id="intro" class="tab active">
        <div id="introContent"></div>

        <!-- Fallback si no hay contenido desde Sheets -->
        <template id="introTemplate">
          <h2>¬øQu√© es una Sistem√°tica Comercial?</h2>
          <p>Una Sistem√°tica Comercial es un modelo de trabajo estructurado que define c√≥mo una organizaci√≥n planifica, ejecuta y mide sus actividades comerciales a lo largo del tiempo.</p>

          <h2>¬øPara qu√© sirve?</h2>
          <ul>
            <li><strong>Claridad y alineamiento</strong> de roles y objetivos.</li>
            <li><strong>Eficiencia</strong> de tiempos y foco en lo que agrega valor.</li>
            <li><strong>Seguimiento</strong> y mejora continua.</li>
          </ul>
        </template>
      </section>

      <!-- AGENDA -->
      <section id="agenda" class="tab">
        <h2>Agenda</h2>
        <div class="controls">
          <select id="agendaPeriod">
            <option value="">Todos los periodos</option>
            <option value="daily">Diario</option>
            <option value="weekly">Semanal</option>
            <option value="monthly">Mensual</option>
            <option value="semiannual">Semestral</option>
            <option value="annual">Anual</option>
          </select>
          <button id="btnToggleAgendaView" type="button">Ver como Acorde√≥n</button>
        </div>

        <table id="agendaTable">
          <thead>
            <tr>
              <th>Periodo</th><th>D√≠a/Semana</th><th>Descripci√≥n</th><th>Objetivo</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

        <div id="agendaAccordion" style="display:none; margin-top:16px;"></div>
      </section>

      <!-- CICLO COMERCIAL -->
      <section id="macro" class="tab">
        <h2>Ciclo Comercial</h2>
        <p>Haz clic en una etapa para desplegar su checklist.</p>

        <!-- SVG interactivo -->
        <svg id="macroSVG" viewBox="0 0 1600 360" width="100%" role="img" aria-label="Ciclo Comercial">
          <defs>
            <style>
              .t { font-family:'Montserrat',system-ui,sans-serif; fill:#333; font-weight:700; }
              .tSmall { font-family:'Montserrat',system-ui,sans-serif; fill:#333; font-weight:600; font-size:22px;}
              .shadow { filter: drop-shadow(0 2px 4px rgba(0,0,0,.15)); }
            </style>
          </defs>

          <!-- Flecha -->
          <g>
            <rect x="40" y="165" width="1450" height="30" fill="#e6e6e6"></rect>
            <polygon points="1490,150 1560,180 1490,210" fill="#e6e6e6"></polygon>
          </g>

          <!-- Etapas -->
          <g class="stage shadow" data-stage="planificacion" cursor="pointer">
            <circle cx="200" cy="180" r="82" fill="#fff" stroke="#ffb300" stroke-width="10"></circle>
            <text x="200" y="150" text-anchor="middle" class="tSmall">üóíÔ∏è</text>
            <text x="200" y="190" text-anchor="middle" class="t" font-size="20">Planificaci√≥n</text>
            <text x="200" y="215" text-anchor="middle" class="t" font-size="20">Comercial</text>
          </g>

          <g class="stage shadow" data-stage="cartera" cursor="pointer">
            <circle cx="450" cy="180" r="82" fill="#fff" stroke="#1e88e5" stroke-width="10"></circle>
            <text x="450" y="150" text-anchor="middle" class="tSmall">üî≠</text>
            <text x="450" y="190" text-anchor="middle" class="t" font-size="20">Gesti√≥n de</text>
            <text x="450" y="215" text-anchor="middle" class="t" font-size="20">Cartera</text>
          </g>

          <g class="stage shadow" data-stage="contacto" cursor="pointer">
            <circle cx="700" cy="180" r="82" fill="#fff" stroke="#43a047" stroke-width="10"></circle>
            <text x="700" y="150" text-anchor="middle" class="tSmall">‚úÖ</text>
            <text x="700" y="190" text-anchor="middle" class="t" font-size="20">Contacto</text>
            <text x="700" y="215" text-anchor="middle" class="t" font-size="20">Clientes</text>
          </g>

          <g class="stage shadow" data-stage="deteccion" cursor="pointer">
            <circle cx="950" cy="180" r="82" fill="#fff" stroke="#e53935" stroke-width="10"></circle>
            <text x="950" y="150" text-anchor="middle" class="tSmall">ü§ù</text>
            <text x="950" y="190" text-anchor="middle" class="t" font-size="20">Detecci√≥n de</text>
            <text x="950" y="215" text-anchor="middle" class="t" font-size="20">Necesidades</text>
          </g>

          <g class="stage shadow" data-stage="asesoria" cursor="pointer">
            <circle cx="1200" cy="180" r="82" fill="#fff" stroke="#8e24aa" stroke-width="10"></circle>
            <text x="1200" y="150" text-anchor="middle" class="tSmall">‚ù§Ô∏è</text>
            <text x="1200" y="190" text-anchor="middle" class="t" font-size="20">Asesor√≠a y</text>
            <text x="1200" y="215" text-anchor="middle" class="t" font-size="20">Propuesta</text>
          </g>

          <g class="stage shadow" data-stage="cierre" cursor="pointer">
            <circle cx="1450" cy="180" r="82" fill="#fff" stroke="#039be5" stroke-width="10"></circle>
            <text x="1450" y="150" text-anchor="middle" class="tSmall">üí¨</text>
            <text x="1450" y="190" text-anchor="middle" class="t" font-size="20">Cierre y</text>
            <text x="1450" y="215" text-anchor="middle" class="t" font-size="20">Seguimiento</text>
          </g>
        </svg>

        <!-- Aqu√≠ se inyecta el checklist de la etapa -->
        <div id="macroChecklist" class="macro-checklist"></div>
      </section>

      <!-- TOOLKIT -->
      <section id="toolkit" class="tab">
        <h2>Toolkit</h2>
        <p>Descarga documentos de apoyo para la ejecuci√≥n comercial.</p>
        <div id="toolkitList" class="cards"></div>
      </section>

      <!-- OBSERVACIONES -->
      <section id="observaciones" class="tab">
        <h2>Observaciones</h2>
        <p>Anote aqu√≠ comentarios de la visita acompa√±ada.</p>

        <div class="grid two">
          <input id="obsEmpresa" placeholder="Empresa visitada">
          <input id="obsCliente" placeholder="Cliente visitado">
          <input id="obsMotivo" placeholder="Motivo de la visita">
          <input id="obsFecha" type="date" placeholder="Fecha de visita">
        </div>

        <textarea id="obsTexto" placeholder="Anote aqu√≠ comentarios de la visita acompa√±ada"></textarea>
        <button id="btnEnviarObs">Guardar observaci√≥n</button>
      </section>

      <!-- HISTORIAL -->
      <section id="history" class="tab">
        <h2>Historial</h2>

        <h3>Checklist</h3>
        <table id="histChecklist">
          <thead><tr><th>Fecha</th><th>Etapa</th><th>√çtem</th><th>Valor</th></tr></thead>
          <tbody></tbody>
        </table>

        <h3>Observaciones</h3>
        <table id="histObs">
          <thead><tr><th>Fecha</th><th>Empresa</th><th>Cliente</th><th>Motivo</th><th>Comentario</th></tr></thead>
          <tbody></tbody>
        </table>
      </section>
    </main>
  </div>

  <footer>MVP v0.2 ¬∑ Montserrat ¬∑ LocalStorage + Google Sheets</footer>
  <script src="app.js"></script>
</body>
</html>
